[首页](/index.md) << ... << [索引](index.md)

# shell中的单中括号[]
shell中的单中括号是一个命令标识，是test命令的另一种形式，用于字符串或整数值的比较。

## 语法格式
    [ exp ]
注意：
1. 中括号的两边和exp之间必须有空格分开。

## 用于字符串的比较
单中括号用于字符串比较时，可以使用运算符包括：==（也可以使用“=”代替）、!=
注意：
1. 单中括号命令要对变量进行单词分离，如果变量的值中包含空格，必须将变量的值使用双引号括起来，如：
    ```
    a='ab c'
    [ "$a" == "ab c"]
    ```
    上面如果不使用双引号将变量a括起来`[ $a = "ab c" ]`，将报错。

### 示例
+ 示例代码
    ```
    #!/bin/bash
    # desc: 单中括号示例代码
    # author: setamv
    # created: 2019-05-05

    # 初始化变量
    a="abc d"
    b="def"

    # 字符串比较
    echo "-----------------字符串比较：==、!=-------------------"
    if [ "$a" == "abc d" ]; then
            echo "a == 'abc'"
    else
            echo "a != 'abc'"
    fi

    if [ $b != 'def' ]; then
            echo "b != 'def'"
    else 
            echo "b == 'def'"
    fi
    ```
+ 执行结果
    ```
    -----------------字符串比较：==、!=-------------------
    a == 'abc'
    b == 'def'
    ```

## 条件判断
单中括号可用于条件判断，其支持的条件判断符号包括：
+ ! : 条件非。
+ -f : 判断文件是否存在。例如：if [ -f filename ]
+ -d : 判断目录是否存在。例如：if [ -d dir ]
+ -eq : 等于比较。应用于整型比较。
+ -ne : 不等于比较。应用于整型比较
+ -lt : 小于比较。应用于整型比较
+ -gt : 大于比较。应用于整型比较
+ -le : 小于或等于比较。应用于整型比较
+ -ge : 大于或等于比较。应用于整型比较
+ -a : 双方都成立（and）。例如：逻辑表达式 -a 逻辑表达式。注意：单中括号中不能使用逻辑运算符“&&”，但是可以使用“&&”将两个单中括号连接起来，如：`[ $a -eq "ab" ] && [ $b -gt 0 ]`
+ -o : 单方成立（or）。例如：逻辑表达式 -o 逻辑表达式。注意：单中括号中不能使用逻辑运算符“||”
+ -z : 空字符串。以下情况将视变量`a`为空字符串：1）变量a不存在；2）a=''；3）a=' '；4）a='   '（里面包含tab符号）；
+ -n : 非空字符串。只有以下情况将变量`a`为空字符串：1）a=''。注意，当变量a未定义时，[ -n $a ] 也是true。

注意：
1. 因为单中括号是命令，它就和参数组合为一体被 shell 解释，那样比如 ">" "<" 就被 shell 解释为重定向符号了，如果要使用“>”、“<”，需要加转义符号


### 示例
+ 示例代码
    ```
    v1=10
    v2=20
    # 比较整型数值
    echo "---------------比较整型数值---------------------"
    if [ $v1 -gt $v2 ]; then
            echo "$v1 > $v2"
    else
            echo "$v1 <= $v2"
    fi

    if [ $v1 -gt 15 -o $v2 -gt 15 ]; then
            echo "$v1 or $v2 > 15"
    else 
            echo "$v1 and $v2 <= 15"
    fi

    if [ $v1 -gt 15 ] || [ $v2 -gt 15 ]; then
            echo "$v1 or $v2 > 15"
    else
            echo "$v1 and $v2 <= 15"
    fi

    # 比较变量是否为空字符串
    a=''
    b=' '
    c='     '       # tab
    echo "---------------判断字符串是否为空----------------"
    if [ -z $a ] && [ -z $b ] && [ -z $c ] && [ -z $d ]; then
            echo "-z: they are all empty"
    else
            echo "-z: some not empty"
    fi

    if [ -n $a ]; then
            echo "-n: $a is not empty"
    else
            echo "-n: $a is empty"
    fi

    if [ -n $b ] && [ -n $c ] && [ -n $d ]; then
            echo "-n: they are all not empty"
    else
            echo "-n: some empty"
    fi
    ```
+ 执行结果
    ```
    ----------------判断目录是否存在---------------------
    /usr/local is exists
    ---------------比较整型数值---------------------
    10 <= 20
    10 or 20 > 15
    10 or 20 > 15
    ---------------判断字符串是否为空----------------
    they are all empty
    some not empty
    [root@centos-7-192 shell]# ./bracket.sh 
    -----------------字符串比较：==、!=-------------------
    a == 'abc'
    b == 'def'
    ----------------判断目录是否存在---------------------
    /usr/local is exists
    ---------------比较整型数值---------------------
    10 <= 20
    10 or 20 > 15
    10 or 20 > 15
    ---------------判断字符串是否为空----------------
    -z: they are all empty
    -n:  is not empty
    -n: they are all not empty
    ```